<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <div class="show">

    </div>
    <script>
        function validate(userName, passWord) {
            //Todo  need link with api
            var params = {
                email: userName,
                password: passWord
            };
            var url =
                'https://9mkb55x7jk.execute-api.ap-southeast-2.amazonaws.com/test/symbiotic-labs/admin/auth?email=' +
                userName + '&password=' + passWord;
            // 1.新建XMLHttpRequest
            var request = new XMLHttpRequest();
            // Open a new connection, using the POST request on the URL endpoint
            // 2.建立连接
            request.open('POST ', url, true);​ //get/post,url,异步或同步
            // 3.设置回调函数
            request.onreadystatechange = function () {
                if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
                    var response = JSON.parse(this.responseText);
                    console.log(response);
                    var idToken = response.idToken.jwtToken;
                    console.log(idToken);
                    if (typeof idToken !== "undefined") {
                        location.replace("https://www.baidu.com/");
                    } else {
                        alert("Login failed!");
                        return false;
                    }
                }
            };
            // 4.设置请求头（post方法必需）
            request.setRequestHeatHeader("Content-Type", "application/json");
            // 5.发送请求
            request.send(JSON.stringify(params));
            // 回调函数

        }

        validate("ericyangxd@126.com", "passWode");
    </script>
</body>

</html>